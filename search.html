---
layout: default
title: Search Results
permalink: /search/
---

<div class="container">
  <h1>Search Results</h1>
  <div id="search-results"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.9/lunr.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const params = new URLSearchParams(window.location.search);
    const query = params.get("query");
    const resultsContainer = document.getElementById("search-results");

    if (!query) {
      resultsContainer.innerHTML = "<p>Please enter a search query.</p>";
      return;
    }

    fetch("/search.json")
      .then(response => response.json())
      .then(data => {
        const docs = data.docs.filter(doc => doc.url.startsWith("/apprendreturc/docs/"));

        const idx = lunr(function () {
          this.ref("url");
          this.field("title");
          this.field("content");

          docs.forEach(function (doc) {
            this.add(doc);
          }, this);
        });

        const results = idx.search(query);
        if (results.length === 0) {
          resultsContainer.innerHTML = "<p>No results found.</p>";
          return;
        }

        const ul = document.createElement("ul");
        results.forEach(result => {
          const doc = docs.find(d => d.url === result.ref);
          const li = document.createElement("li");
          li.innerHTML = `<a href="${doc.url}">${doc.title}</a>`;
          ul.appendChild(li);
        });
        resultsContainer.appendChild(ul);
      });
  });
</script>
